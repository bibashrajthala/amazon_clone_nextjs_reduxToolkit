"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/checkout_sessions";
exports.ids = ["pages/api/checkout_sessions"];
exports.modules = {

/***/ "stripe":
/*!*************************!*\
  !*** external "stripe" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stripe");

/***/ }),

/***/ "(api)/./pages/api/checkout_sessions.js":
/*!****************************************!*\
  !*** ./pages/api/checkout_sessions.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\nconst stripe = __webpack_require__(/*! stripe */ \"stripe\")(process.env.STRIPE_SECRET_KEY);\nasync function handler(req, res) {\n    const { items , email  } = req.body;\n    // console.log(items);\n    console.log(email);\n    const transformedItems = items.map((item)=>({\n            quantity: 1,\n            price_data: {\n                currency: \"gbp\",\n                unit_amount: item.price * 100,\n                product_data: {\n                    name: item.title,\n                    description: item.description,\n                    images: [\n                        item.image\n                    ]\n                }\n            }\n        }));\n    const session = await stripe.checkout.sessions.create({\n        payment_method_types: [\n            \"card\"\n        ],\n        shipping_address_collection: {\n            allowed_countries: [\n                \"US\",\n                \"CA\",\n                \"GB\"\n            ]\n        },\n        shipping_options: [\n            {\n                shipping_rate: \"shr_1MI32DFfBssmaNm0X61PNFfo\"\n            }\n        ],\n        line_items: transformedItems,\n        mode: \"payment\",\n        success_url: `${process.env.HOST}/success`,\n        cancel_url: `${process.env.HOST}/checkout`,\n        metadata: {\n            email,\n            images: JSON.stringify(items.map((item)=>item.image))\n        }\n    });\n    res.status(200).json({\n        id: session.id\n    });\n//   if (req.method === \"POST\") {\n//     try {\n//       // Create Checkout Sessions from body params.\n//       const session = await stripe.checkout.sessions.create({\n//         customer_email: \"customer@example.com\",\n//         submit_type: \"donate\",\n//         billing_address_collection: \"auto\",\n//         shipping_address_collection: {\n//           allowed_countries: [\"US\", \"CA\"],\n//         },\n//         line_items: [\n//           {\n//             // Provide the exact Price ID (for example, pr_1234) of the product you want to sell\n//             price: \"{{PRICE_ID}}\",\n//             quantity: 1,\n//           },\n//         ],\n//         mode: \"payment\",\n//         success_url: `${req.headers.origin}/?success=true`,\n//         cancel_url: `${req.headers.origin}/?canceled=true`,\n//       });\n//       res.redirect(303, session.url);\n//     } catch (err) {\n//       res.status(err.statusCode || 500).json(err.message);\n//     }\n//   } else {\n//     res.setHeader(\"Allow\", \"POST\");\n//     res.status(405).end(\"Method Not Allowed\");\n//   }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvY2hlY2tvdXRfc2Vzc2lvbnMuanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE1BQU1BLFNBQVNDLG1CQUFPQSxDQUFDLHNCQUFRLEVBQUVDLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCO0FBRS9DLGVBQWVDLFFBQVFDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQzlDLE1BQU0sRUFBRUMsTUFBSyxFQUFFQyxNQUFLLEVBQUUsR0FBR0gsSUFBSUksSUFBSTtJQUNqQyxzQkFBc0I7SUFDdEJDLFFBQVFDLEdBQUcsQ0FBQ0g7SUFFWixNQUFNSSxtQkFBbUJMLE1BQU1NLEdBQUcsQ0FBQyxDQUFDQyxPQUFVO1lBQzVDQyxVQUFVO1lBQ1ZDLFlBQVk7Z0JBQ1ZDLFVBQVU7Z0JBQ1ZDLGFBQWFKLEtBQUtLLEtBQUssR0FBRztnQkFDMUJDLGNBQWM7b0JBQ1pDLE1BQU1QLEtBQUtRLEtBQUs7b0JBQ2hCQyxhQUFhVCxLQUFLUyxXQUFXO29CQUM3QkMsUUFBUTt3QkFBQ1YsS0FBS1csS0FBSztxQkFBQztnQkFDdEI7WUFDRjtRQUNGO0lBRUEsTUFBTUMsVUFBVSxNQUFNM0IsT0FBTzRCLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDQyxNQUFNLENBQUM7UUFDcERDLHNCQUFzQjtZQUFDO1NBQU87UUFDOUJDLDZCQUE2QjtZQUMzQkMsbUJBQW1CO2dCQUFDO2dCQUFNO2dCQUFNO2FBQUs7UUFDdkM7UUFDQUMsa0JBQWtCO1lBQUM7Z0JBQUVDLGVBQWU7WUFBK0I7U0FBRTtRQUNyRUMsWUFBWXZCO1FBQ1p3QixNQUFNO1FBQ05DLGFBQWEsQ0FBQyxFQUFFcEMsUUFBUUMsR0FBRyxDQUFDb0MsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUMxQ0MsWUFBWSxDQUFDLEVBQUV0QyxRQUFRQyxHQUFHLENBQUNvQyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQzFDRSxVQUFVO1lBQ1JoQztZQUNBZ0IsUUFBUWlCLEtBQUtDLFNBQVMsQ0FBQ25DLE1BQU1NLEdBQUcsQ0FBQyxDQUFDQyxPQUFTQSxLQUFLVyxLQUFLO1FBQ3ZEO0lBQ0Y7SUFFQW5CLElBQUlxQyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1FBQ25CQyxJQUFJbkIsUUFBUW1CLEVBQUU7SUFDaEI7QUFFQSxpQ0FBaUM7QUFDakMsWUFBWTtBQUNaLHNEQUFzRDtBQUN0RCxnRUFBZ0U7QUFDaEUsa0RBQWtEO0FBQ2xELGlDQUFpQztBQUNqQyw4Q0FBOEM7QUFDOUMseUNBQXlDO0FBQ3pDLDZDQUE2QztBQUM3QyxhQUFhO0FBQ2Isd0JBQXdCO0FBQ3hCLGNBQWM7QUFDZCxtR0FBbUc7QUFDbkcscUNBQXFDO0FBQ3JDLDJCQUEyQjtBQUMzQixlQUFlO0FBQ2YsYUFBYTtBQUNiLDJCQUEyQjtBQUMzQiw4REFBOEQ7QUFDOUQsOERBQThEO0FBQzlELFlBQVk7QUFDWix3Q0FBd0M7QUFDeEMsc0JBQXNCO0FBQ3RCLDZEQUE2RDtBQUM3RCxRQUFRO0FBQ1IsYUFBYTtBQUNiLHNDQUFzQztBQUN0QyxpREFBaUQ7QUFDakQsTUFBTTtBQUNSLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbWF6b24tY2xvbmUvLi9wYWdlcy9hcGkvY2hlY2tvdXRfc2Vzc2lvbnMuanM/MDc5YSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzdHJpcGUgPSByZXF1aXJlKFwic3RyaXBlXCIpKHByb2Nlc3MuZW52LlNUUklQRV9TRUNSRVRfS0VZKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBjb25zdCB7IGl0ZW1zLCBlbWFpbCB9ID0gcmVxLmJvZHk7XHJcbiAgLy8gY29uc29sZS5sb2coaXRlbXMpO1xyXG4gIGNvbnNvbGUubG9nKGVtYWlsKTtcclxuXHJcbiAgY29uc3QgdHJhbnNmb3JtZWRJdGVtcyA9IGl0ZW1zLm1hcCgoaXRlbSkgPT4gKHtcclxuICAgIHF1YW50aXR5OiAxLFxyXG4gICAgcHJpY2VfZGF0YToge1xyXG4gICAgICBjdXJyZW5jeTogXCJnYnBcIixcclxuICAgICAgdW5pdF9hbW91bnQ6IGl0ZW0ucHJpY2UgKiAxMDAsXHJcbiAgICAgIHByb2R1Y3RfZGF0YToge1xyXG4gICAgICAgIG5hbWU6IGl0ZW0udGl0bGUsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IGl0ZW0uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgaW1hZ2VzOiBbaXRlbS5pbWFnZV0sXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIH0pKTtcclxuXHJcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHN0cmlwZS5jaGVja291dC5zZXNzaW9ucy5jcmVhdGUoe1xyXG4gICAgcGF5bWVudF9tZXRob2RfdHlwZXM6IFtcImNhcmRcIl0sXHJcbiAgICBzaGlwcGluZ19hZGRyZXNzX2NvbGxlY3Rpb246IHtcclxuICAgICAgYWxsb3dlZF9jb3VudHJpZXM6IFtcIlVTXCIsIFwiQ0FcIiwgXCJHQlwiXSxcclxuICAgIH0sXHJcbiAgICBzaGlwcGluZ19vcHRpb25zOiBbeyBzaGlwcGluZ19yYXRlOiBcInNocl8xTUkzMkRGZkJzc21hTm0wWDYxUE5GZm9cIiB9XSxcclxuICAgIGxpbmVfaXRlbXM6IHRyYW5zZm9ybWVkSXRlbXMsXHJcbiAgICBtb2RlOiBcInBheW1lbnRcIixcclxuICAgIHN1Y2Nlc3NfdXJsOiBgJHtwcm9jZXNzLmVudi5IT1NUfS9zdWNjZXNzYCxcclxuICAgIGNhbmNlbF91cmw6IGAke3Byb2Nlc3MuZW52LkhPU1R9L2NoZWNrb3V0YCxcclxuICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgIGVtYWlsLFxyXG4gICAgICBpbWFnZXM6IEpTT04uc3RyaW5naWZ5KGl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS5pbWFnZSkpLFxyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgaWQ6IHNlc3Npb24uaWQsXHJcbiAgfSk7XHJcblxyXG4gIC8vICAgaWYgKHJlcS5tZXRob2QgPT09IFwiUE9TVFwiKSB7XHJcbiAgLy8gICAgIHRyeSB7XHJcbiAgLy8gICAgICAgLy8gQ3JlYXRlIENoZWNrb3V0IFNlc3Npb25zIGZyb20gYm9keSBwYXJhbXMuXHJcbiAgLy8gICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHN0cmlwZS5jaGVja291dC5zZXNzaW9ucy5jcmVhdGUoe1xyXG4gIC8vICAgICAgICAgY3VzdG9tZXJfZW1haWw6IFwiY3VzdG9tZXJAZXhhbXBsZS5jb21cIixcclxuICAvLyAgICAgICAgIHN1Ym1pdF90eXBlOiBcImRvbmF0ZVwiLFxyXG4gIC8vICAgICAgICAgYmlsbGluZ19hZGRyZXNzX2NvbGxlY3Rpb246IFwiYXV0b1wiLFxyXG4gIC8vICAgICAgICAgc2hpcHBpbmdfYWRkcmVzc19jb2xsZWN0aW9uOiB7XHJcbiAgLy8gICAgICAgICAgIGFsbG93ZWRfY291bnRyaWVzOiBbXCJVU1wiLCBcIkNBXCJdLFxyXG4gIC8vICAgICAgICAgfSxcclxuICAvLyAgICAgICAgIGxpbmVfaXRlbXM6IFtcclxuICAvLyAgICAgICAgICAge1xyXG4gIC8vICAgICAgICAgICAgIC8vIFByb3ZpZGUgdGhlIGV4YWN0IFByaWNlIElEIChmb3IgZXhhbXBsZSwgcHJfMTIzNCkgb2YgdGhlIHByb2R1Y3QgeW91IHdhbnQgdG8gc2VsbFxyXG4gIC8vICAgICAgICAgICAgIHByaWNlOiBcInt7UFJJQ0VfSUR9fVwiLFxyXG4gIC8vICAgICAgICAgICAgIHF1YW50aXR5OiAxLFxyXG4gIC8vICAgICAgICAgICB9LFxyXG4gIC8vICAgICAgICAgXSxcclxuICAvLyAgICAgICAgIG1vZGU6IFwicGF5bWVudFwiLFxyXG4gIC8vICAgICAgICAgc3VjY2Vzc191cmw6IGAke3JlcS5oZWFkZXJzLm9yaWdpbn0vP3N1Y2Nlc3M9dHJ1ZWAsXHJcbiAgLy8gICAgICAgICBjYW5jZWxfdXJsOiBgJHtyZXEuaGVhZGVycy5vcmlnaW59Lz9jYW5jZWxlZD10cnVlYCxcclxuICAvLyAgICAgICB9KTtcclxuICAvLyAgICAgICByZXMucmVkaXJlY3QoMzAzLCBzZXNzaW9uLnVybCk7XHJcbiAgLy8gICAgIH0gY2F0Y2ggKGVycikge1xyXG4gIC8vICAgICAgIHJlcy5zdGF0dXMoZXJyLnN0YXR1c0NvZGUgfHwgNTAwKS5qc29uKGVyci5tZXNzYWdlKTtcclxuICAvLyAgICAgfVxyXG4gIC8vICAgfSBlbHNlIHtcclxuICAvLyAgICAgcmVzLnNldEhlYWRlcihcIkFsbG93XCIsIFwiUE9TVFwiKTtcclxuICAvLyAgICAgcmVzLnN0YXR1cyg0MDUpLmVuZChcIk1ldGhvZCBOb3QgQWxsb3dlZFwiKTtcclxuICAvLyAgIH1cclxufVxyXG4iXSwibmFtZXMiOlsic3RyaXBlIiwicmVxdWlyZSIsInByb2Nlc3MiLCJlbnYiLCJTVFJJUEVfU0VDUkVUX0tFWSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJpdGVtcyIsImVtYWlsIiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJ0cmFuc2Zvcm1lZEl0ZW1zIiwibWFwIiwiaXRlbSIsInF1YW50aXR5IiwicHJpY2VfZGF0YSIsImN1cnJlbmN5IiwidW5pdF9hbW91bnQiLCJwcmljZSIsInByb2R1Y3RfZGF0YSIsIm5hbWUiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiaW1hZ2VzIiwiaW1hZ2UiLCJzZXNzaW9uIiwiY2hlY2tvdXQiLCJzZXNzaW9ucyIsImNyZWF0ZSIsInBheW1lbnRfbWV0aG9kX3R5cGVzIiwic2hpcHBpbmdfYWRkcmVzc19jb2xsZWN0aW9uIiwiYWxsb3dlZF9jb3VudHJpZXMiLCJzaGlwcGluZ19vcHRpb25zIiwic2hpcHBpbmdfcmF0ZSIsImxpbmVfaXRlbXMiLCJtb2RlIiwic3VjY2Vzc191cmwiLCJIT1NUIiwiY2FuY2VsX3VybCIsIm1ldGFkYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXR1cyIsImpzb24iLCJpZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/checkout_sessions.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/checkout_sessions.js"));
module.exports = __webpack_exports__;

})();